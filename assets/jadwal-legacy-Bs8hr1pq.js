System.register(["./main-legacy-BPpeyMIY.js","./components-legacy-BNSLIDmU.js"],function(t,e){"use strict";var n,a,i;return{setters:[t=>{n=t.S,a=t.P,i=t.U},null],execute:function(){document.addEventListener("DOMContentLoaded",async()=>{const t=new a;let e=(new Date).getMonth()+1,o=(new Date).getFullYear();async function r(){try{const e=n.get("app_config"),a=(await t.getPrayerTimesWithCache(e.location)).timings,o=[{name:"Imsak",time:a.Imsak,icon:"bi-sunrise"},{name:"Subuh",time:a.Fajr,icon:"bi-brightness-high"},{name:"Dzuhur",time:a.Dhuhr,icon:"bi-sun"},{name:"Ashar",time:a.Asr,icon:"bi-cloud-sun"},{name:"Maghrib",time:a.Maghrib,icon:"bi-sunset"},{name:"Isya",time:a.Isha,icon:"bi-moon-stars"}];document.getElementById("prayerTimesToday").innerHTML=o.map(t=>`\n                    <div class="prayer-detail-card">\n                        <div class="d-flex justify-content-between align-items-center">\n                            <div>\n                                <i class="bi ${t.icon} me-2"></i>\n                                <span class="prayer-name">${t.name}</span>\n                            </div>\n                            <span class="prayer-time-large">${i.formatTime(t.time)}</span>\n                        </div>\n                    </div>\n                `).join("");const r=t.getNextPrayerTime(a);document.getElementById("nextPrayerInfo").innerHTML=`\n                    <h5 class="mb-1">Shalat Berikutnya: <strong>${r.name}</strong></h5>\n                    <p class="mb-0">${r.time} - ${r.countdown}</p>\n                `}catch(e){}}async function c(e,a){try{const o=n.get("app_config"),r=o.prayer_method||99;let c;if(document.getElementById("currentMonthLabel").textContent=new Date(a,e-1).toLocaleDateString("id-ID",{month:"long",year:"numeric"}),o.location.latitude&&o.location.longitude)c=await t.getMonthlyCalendarByCoordinates(o.location.latitude,o.location.longitude,a,e,r);else{const n=o.location.city,i=o.location.country||"Indonesia";if(!n)return;c=await t.getMonthlyCalendar(n,i,a,e,r)}document.getElementById("monthlyPrayerBody").innerHTML=c.map((t,n)=>{const o=new Date(a,e-1,n+1);return`\n                        <tr class="${o.toDateString()===(new Date).toDateString()?"table-primary":""}">\n                            <td><strong>${n+1} ${o.toLocaleDateString("id-ID",{month:"short"})}</strong></td>\n                            <td>${i.formatTime(t.timings.Imsak)}</td>\n                            <td>${i.formatTime(t.timings.Fajr)}</td>\n                            <td>${i.formatTime(t.timings.Dhuhr)}</td>\n                            <td>${i.formatTime(t.timings.Asr)}</td>\n                            <td>${i.formatTime(t.timings.Maghrib)}</td>\n                            <td>${i.formatTime(t.timings.Isha)}</td>\n                        </tr>\n                    `}).join("")}catch(o){document.getElementById("monthlyPrayerBody").innerHTML='\n              <tr>\n                <td colspan="7" class="text-center text-danger">\n                  Gagal memuat jadwal. Pastikan koneksi internet lancar.\n                </td>\n              </tr>\n            '}}document.getElementById("prevMonth").addEventListener("click",()=>{e--,e<1&&(e=12,o--),c(e,o)}),document.getElementById("nextMonth").addEventListener("click",()=>{e++,e>12&&(e=1,o++),c(e,o)}),document.getElementById("currentMonthBtn").addEventListener("click",()=>{e=(new Date).getMonth()+1,o=(new Date).getFullYear(),c(e,o)}),function(){const t=n.get("app_config");if(t&&t.location){const e=t.location;e.city?(document.getElementById("locationName").textContent=`${e.city}, ${e.country||"Indonesia"}`,document.getElementById("locationDetails").textContent="Metode: Kementerian Agama RI"):e.latitude&&e.longitude&&(document.getElementById("locationName").textContent="Lokasi GPS",document.getElementById("locationDetails").textContent=`Koordinat: ${e.latitude.toFixed(4)}, ${e.longitude.toFixed(4)}`)}}(),r(),c(e,o),setInterval(r,6e4)})}}});
