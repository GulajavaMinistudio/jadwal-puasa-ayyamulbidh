System.register(["./main-legacy-BPpeyMIY.js","./components-legacy-BNSLIDmU.js"],function(t,e){"use strict";var n,a,o;return{setters:[t=>{n=t.F,a=t.S,o=t.U},null],execute:function(){document.addEventListener("DOMContentLoaded",()=>{const t=new n;document.getElementById("locationForm").addEventListener("submit",async t=>{t.preventDefault();const e=document.getElementById("citySelect").value;if(!e)return void alert("Pilih kota terlebih dahulu!");const n=a.get("app_config")||{};n.location={city:e,country:"Indonesia",method:"manual"},n.first_time_setup=!0,a.save("app_config",n),alert("Lokasi berhasil disimpan! Halaman akan di-refresh."),window.location.reload()}),document.getElementById("autoDetectBtn").addEventListener("click",()=>{const t=document.getElementById("gpsStatus");if(t.textContent="Mendeteksi lokasi...",t.className="mt-2 small text-info",!navigator.geolocation)return t.textContent="Browser tidak mendukung geolocation",void(t.className="mt-2 small text-danger");navigator.geolocation.getCurrentPosition(e=>{const n=a.get("app_config")||{};n.location={latitude:e.coords.latitude,longitude:e.coords.longitude,method:"gps"},n.first_time_setup=!0,a.save("app_config",n),t.textContent="Lokasi berhasil terdeteksi!",t.className="mt-2 small text-success",setTimeout(()=>window.location.reload(),1500)},e=>{t.textContent="Gagal mendeteksi lokasi. Gunakan pilihan manual.",t.className="mt-2 small text-danger"})}),document.getElementById("methodForm").addEventListener("submit",t=>{t.preventDefault();const e=parseInt(document.getElementById("methodSelect").value),n=a.get("app_config")||{};n.prayer_method=e,a.save("app_config",n),alert("Metode berhasil disimpan!")}),document.getElementById("exportBtn").addEventListener("click",()=>{const t=a.exportData(),e=`puasa-ayyamul-bidh-${(new Date).toISOString().split("T")[0]}.json`;o.downloadJSON(t,e)}),document.getElementById("importFile").addEventListener("change",async t=>{const e=t.target.files[0];if(e)try{const t=await o.parseJSONFile(e);a.importData(t)?(alert("Data berhasil di-import! Halaman akan di-refresh."),window.location.reload()):alert("Gagal import data. File tidak valid.")}catch(n){alert("Error: "+n.message)}}),document.getElementById("resetBtn").addEventListener("click",()=>{new bootstrap.Modal(document.getElementById("confirmModal")).show()}),document.getElementById("confirmResetBtn").addEventListener("click",()=>{a.clear(),t.resetAll(),alert("Semua data berhasil dihapus!"),window.location.href="index.html"}),function(){const t=a.get("app_config");t&&(t.location.city?(document.getElementById("citySelect").value=t.location.city,document.getElementById("currentLocation").textContent=`${t.location.city}, ${t.location.country||"Indonesia"}`):t.location.latitude&&(document.getElementById("currentLocation").textContent=`GPS (${t.location.latitude.toFixed(4)}, ${t.location.longitude.toFixed(4)})`),t.prayer_method&&(document.getElementById("methodSelect").value=t.prayer_method))}()})}}});
